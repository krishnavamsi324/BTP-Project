//@ui5-bundle task2collegelect/Component-preload.js
sap.ui.require.preload({
	"task2collegelect/Component.js":function(){
sap.ui.define(["sap/fe/core/AppComponent"],function(e){"use strict";return e.extend("task2collegelect.Component",{metadata:{manifest:"json"}})});
},
	"task2collegelect/ext/controller/Approval.js":function(){
sap.ui.define(["sap/m/MessageToast"],function(e){"use strict";return{SendApproval:function(n){e.show("Custom handler invoked.")}}});
},
	"task2collegelect/ext/controller/Attachments.controller.js":function(){
sap.ui.define(["sap/m/library","sap/ui/core/mvc/Controller","sap/ui/core/Item","sap/ui/model/json/JSONModel","sap/m/upload/Uploader"],function(e,a,o,p,s){"use strict";return a.extend("sap.m.sample.UploadSet.Page",{})});
},
	"task2collegelect/ext/controller/LecObjectcontroller.controller.js":function(){
sap.ui.define(["sap/ui/core/mvc/ControllerExtension"],function(e){"use strict";var t;return e.extend("task2collegelect.ext.controller.LecObjectcontroller",{override:{routing:{onAfterBinding:async function(){debugger;setTimeout(function(){this.base.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Button")}).forEach(function(e){if(e.getText().includes("Create")){e.setText("Send for Approval")}})}.bind(this),500)},onBeforeBinding:async function(){debugger;var e=this.base.getExtensionAPI().getModel();if(!e){console.error("Model is not available.");return}debugger;var s=this.base.getView().byId("task2collegelect::collegeObjectPage--fe::CustomSubSection::Attachments--uploadSet");const i=window.location.href;console.log("Current URL:",i);const n=new URL(i);const l=n.hash.substring(1);const o=/college\(lectId='([^']*)',IsActiveEntity=(true|false)\)/.exec(l);const a=o?o[1]:null;const d=o?o[2]==="true":null;if(d===true){s.setUploadButtonInvisible(true);s.setUploadEnabled(false);s.mBindingInfos.items.template.setEnabledRemove(false);s.mBindingInfos.items.template.setVisibleRemove(false);s.mBindingInfos.items.template.setEnabledEdit(false);s.mBindingInfos.items.template.setVisibleEdit(false)}else if(d===false){s.setUploadButtonInvisible(false);s.setUploadEnabled(true);s.mBindingInfos.items.template.setEnabledRemove(true);s.mBindingInfos.items.template.setVisibleRemove(true);s.mBindingInfos.items.template.setEnabledEdit(true);s.mBindingInfos.items.template.setVisibleEdit(true)}setTimeout(async function(){if(a&&d===true){s.setUploadButtonInvisible(true);s.setUploadEnabled(false);s.mBindingInfos.items.template.setEnabledRemove(false);s.mBindingInfos.items.template.setVisibleRemove(false);s.mBindingInfos.items.template.setEnabledEdit(false);s.mBindingInfos.items.template.setVisibleEdit(false);let i="postattach";let n=this.getView().getModel().bindContext(`/${i}(...)`);console.log();n.setParameter("p",a);await n.execute();const l=n.getBoundContext();var e=l.getValue();console.log(e.value.status);if(e.value.status=="Approved"&&t==="krishna.vamsi@peolsolutions.com"){this.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Button")}).forEach(function(e){if(e.getId().includes("Delete")){e.setVisible(true)}else if(e.getId().includes("Edit")){e.setEnabled(true)}})}else{this.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Button")}).forEach(function(e){if(e.getId().includes("Delete")){e.setEnabled(false);e.setVisible(false)}else if(e.getId().includes("Edit")){e.setEnabled(false);e.setVisible(false)}})}}}.bind(this),500)}},onInit:async function(){var e=this.base.getExtensionAPI().getModel();debugger;if(sap.ushell&&sap.ushell.Container){t=(new sap.ushell.services.UserInfo).getEmail();console.log(t);debugger;if(t!=="krishna.vamsi@peolsolutions.com"){this.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Button")}).forEach(function(e){if(e.getId().includes("Delete")){e.setVisible(false)}else if(e.getId().includes("Edit")){e.setEnabled(false)}})}}}}})});
},
	"task2collegelect/ext/controller/Listcontroller.controller.js":function(){
sap.ui.define(["sap/ui/core/mvc/ControllerExtension"],function(e){"use strict";var t;return e.extend("task2collegelect.ext.controller.Listcontroller",{override:{routing:{onBeforeBinding:async function(){var e=this.getView().findAggregatedObjects(true,function(e){return e.isA("sap.ui.table.Table")||e.isA("sap.m.Table")});debugger;if(e.length>0){var i=e[1].getHeaderToolbar();var s=e[2].getHeaderToolbar();i.setVisible(false);s.setVisible(false)}if(t!=="krishna.vamsi@peolsolutions.com"){var n=this.base.getView().byId("task2collegelect::collegeList--fe::FilterBar::college-btnAdapt");n.setVisible(false);const t=this.base.getView();const i=t.getContent()[0].mAggregations.content.mAssociations.filterControl;const s=sap.ui.getCore().byId(i);var e=this.getView().findAggregatedObjects(true,function(e){return e.isA("sap.ui.table.Table")||e.isA("sap.m.Table")})[0];debugger;var a=e.getBinding("items");if(a){var r=new Filter({path:"IsActiveEntity",operator:FilterOperator.EQ,value1:true});a.filter([r])}var o=sap.ui.getCore().byId(i);var l={$editState:[{operator:"DRAFT_EDIT_STATE",values:["ALL_HIDING_DRAFTS","All (Hiding Drafts)"],validated:"Validated"}]};o.setFilterConditions(l)}}},onInit:async function(){debugger;var e=this.base.getExtensionAPI().getModel();if(sap.ushell&&sap.ushell.Container){t=(new sap.ushell.services.UserInfo).getEmail();console.log(t);debugger;const e=window.location.origin;console.log("Path URL:",e);if(t!=="krishna.vamsi@peolsolutions.com"){this.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Button")}).forEach(function(e){if(e.getId().includes("Create")||e.getId().includes("Delete")){e.setVisible(false)}else if(e.getId().includes("Adapt Filters (1)")){e.setEnabled(false)}});this.base.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Input")&&e.getId().includes("Draft")}).forEach(function(e){e.setEditable(false)})}}}}})});
},
	"task2collegelect/ext/fragment/Attachments.fragment.xml":'<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:upload="sap.m.upload"  xmlns:macros="sap.fe.macros"><VBox id="_IDGenVBox1" core:require="{ handler: \'task2collegelect/ext/fragment/Attachments\'}"><App id="app"><pages><Page id="page" showHeader="false"><upload:UploadSet\n                        id="uploadSet"\n                        instantUpload="false"\n\t\t\t\t\t\tuploadEnabled="true"\n                        sameFilenameAllowed="false"\n\t\t\t\t\t\tafterItemAdded="handler.onAfterItemAdded"\n\t\t\t\t\t\tuploadCompleted="handler.onUploadCompleted"\n                        afterItemRemoved="handler.onAfterItemRemoved"\n                        fileRenamed="handler.onFileRenamed"\t\n                        uploadButtonInvisible="false"\n                        items="{\n                                    path: \'coltofile\',\n                                    parameters: {\n                                        $orderby: \'createdAt desc\'\n                                    },\n                                    templateShareable: false}"><upload:toolbar><OverflowToolbar id="_IDGenOverflowToolbar1"><ToolbarSpacer id="_IDGenToolbarSpacer1"/><upload:UploadSetToolbarPlaceholder id="_IDGenUploadSetToolbarPlaceholder1" /></OverflowToolbar></upload:toolbar><upload:items><upload:UploadSetItem id="_IDGenUploadSetItem1"\n                                fileName="{fileName}"\n                                mediaType="{mediaType}"\n                                url="{url}"\n                                enabledEdit="false"\n                                visibleRemove=\'false\'\n                                visibleEdit="false"\n                                openPressed="handler.onOpenPressed"><upload:attributes><ObjectAttribute id="_IDGenObjectAttribute1"\n                                        title="Uploaded By"\n                                        text="{createdBy}"\n                                        active="false"/><ObjectAttribute id="_IDGenObjectAttribute2"\n                                        title="Uploaded on"\n                                        text="{createdAt}"\n                                        active="false"/><ObjectAttribute id="_IDGenObjectAttribute3"\n                                        title="File Size"\n                                        text="{size}"\n                                        active="false"/></upload:attributes></upload:UploadSetItem></upload:items></upload:UploadSet></Page></pages></App></VBox></core:FragmentDefinition>',
	"task2collegelect/ext/fragment/Attachments.js":function(){
sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageToast"],function(e,t,o){"use strict";var r;return{onInit:function(){},onAfterItemAdded:function(e){debugger;var t=e.oSource.getModel().getServiceUrl();var o=e.getParameter("item");var n=window.location.href;var s=/college\([^)]*\)/;const i=n.match(s);if(i){r=i[0];console.log(r)}else{console.log("Number not found in URL")}var o=e.getParameter("item");var a={mediaType:o.getMediaType(),fileName:o.getFileName(),size:o.getFileObject().size};var l={url:t+r+"/coltofile",method:"POST",headers:{"Content-type":"application/json"},data:JSON.stringify(a)};return new Promise((e,t)=>{$.ajax(l).done((t,o,r)=>{e(t.ID)}).fail(e=>{t(e)})}).then(e=>{debugger;var r=t+`Files(ID=${e},IsActiveEntity=false)/content`;o.setUploadUrl(r);var n=this.byId("uploadSet");n.setHttpRequestMethod("PUT");n.uploadItem(o)}).catch(e=>{console.log(e)})},onUploadCompleted:function(e){debugger;var t=this.byId("uploadSet");t.removeAllIncompleteItems();t.getBinding("items");var o=e.oSource.mBindingInfos.items.binding.oContext;o.refresh()},onOpenPressed:async function(e){debugger;var t=e.oSource.getModel().getServiceUrl();var o=e.oSource.mProperties.url;let r;if(!o.startsWith(t)){r=t+e.oSource.mProperties.url}else{r=e.oSource.mProperties.url}const n=window.location.href;console.log("Current URL:",n);const s=new URL(n);const i=s.hash.substring(1);const a=/college\(lectId='([^']*)',IsActiveEntity=(true|false)\)/.exec(i);const l=a?a[2]==="true":null;var t=e.oSource.getModel().getServiceUrl();if(l===false){debugger;e.oSource.mProperties.url=r.replace("true","false")}else{e.oSource.mProperties.url=r}},onAfterItemRemoved:function(e){debugger;var t=e.oSource.getModel().getServiceUrl();var o=e.getParameter("item");var r=o.getBindingContext().getProperty("ID");var n=t+`Files(ID=${r},IsActiveEntity=false)`;$.ajax({url:n,method:"DELETE",success:function(){sap.m.MessageToast.show("File deleted successfully")}.bind(this),error:function(e){sap.m.MessageToast.show("Error deleting file");console.log("Error deleting file:",e)}})},onFileRenamed:function(e){debugger;var t=e.oSource.getModel().getServiceUrl();var o=e.getParameter("item");var r=o.getBindingContext().getProperty("ID");var n=t+`Files(ID=${r},IsActiveEntity=false)`;var s={fileName:sNewFileName};$.ajax({url:n,method:"PATCH",contentType:"application/json",data:JSON.stringify(s),success:function(){sap.m.MessageToast.show("File name updated successfully")},error:function(e){sap.m.MessageToast.show("Error updating file name");console.log("Error updating file name:",e)}})}}});
},
	"task2collegelect/i18n/i18n.properties":'# This is the resource bundle for task2collegelect\n\n#Texts for manifest.json\n\n#XTIT: Application name\nappTitle=Lecturer Details\n\n#YDES: Application description\nappDescription=An SAP Fiori application.\n\n#XFLD,48\nflpTitle=task2collegelect\n',
	"task2collegelect/manifest.json":'{"_version":"1.59.0","sap.app":{"id":"task2collegelect","type":"application","i18n":"i18n/i18n.properties","applicationVersion":{"version":"0.0.1"},"title":"{{College App}}","description":"{{Lecturer Details}}","resources":"resources.json","sourceTemplate":{"id":"@sap/generator-fiori:lrop","version":"1.14.2","toolsId":"f0086360-1b13-4605-8b5c-f9a74ea7e51f"},"dataSources":{"mainService":{"uri":"odata/v4/my/","type":"OData","settings":{"annotations":[],"odataVersion":"4.0","localUri":"localService/metadata.xml"}}},"crossNavigation":{"inbounds":{"task2collegelect-display":{"semanticObject":"task2collegelect","action":"display","title":"{{flpTitle}}","signature":{"parameters":{},"additionalParameters":"allowed"}}}}},"sap.ui":{"technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"flexEnabled":true,"dependencies":{"minUI5Version":"1.126.1","libs":{"sap.m":{},"sap.ui.core":{},"sap.ushell":{},"sap.fe.templates":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"task2collegelect.i18n.i18n"}},"":{"dataSource":"mainService","type":"sap.ui.model.odata.v4.ODataModel","preload":true,"settings":{"synchronizationMode":"None","operationMode":"Server","autoExpandSelect":true,"earlyRequests":true,"groupProperties":{"default":{"submit":"Auto"}}}},"@i18n":{"type":"sap.ui.model.resource.ResourceModel","uri":"i18n/i18n.properties"}},"resources":{"css":[]},"routing":{"config":{},"routes":[{"pattern":":?query:","name":"collegeList","target":"collegeList"},{"pattern":"college({key}):?query:","name":"collegeObjectPage","target":"collegeObjectPage"}],"targets":{"collegeList":{"type":"Component","id":"collegeList","name":"sap.fe.templates.ListReport","options":{"settings":{"contextPath":"/college","navigation":{"college":{"detail":{"route":"collegeObjectPage"}}},"variantManagement":"None","views":{"paths":[{"key":"tableView","annotationPath":"com.sap.vocabularies.UI.v1.SelectionPresentationVariant#tableView"},{"key":"tableView2","annotationPath":"com.sap.vocabularies.UI.v1.SelectionPresentationVariant#tableView2"},{"key":"tableView1","annotationPath":"com.sap.vocabularies.UI.v1.SelectionPresentationVariant#tableView1"}]},"initialLoad":"Enabled"}}},"collegeObjectPage":{"type":"Component","id":"collegeObjectPage","name":"sap.fe.templates.ObjectPage","options":{"settings":{"contextPath":"/college","navigation":{},"content":{"body":{"sections":{"Attachments":{"template":"task2collegelect.ext.fragment.Attachments","position":{"placement":"After","anchor":"Lecturer"},"title":"Attachments"}}}},"showRelatedApps":false}}}}},"extends":{"extensions":{"sap.ui.controllerExtensions":{"sap.fe.templates.ListReport.ListReportController":{"controllerName":"task2collegelect.ext.controller.Listcontroller"},"sap.fe.templates.ObjectPage.ObjectPageController":{"controllerNames":["task2collegelect.ext.controller.LecObjectcontroller","task2collegelect.ext.controller.Attachments"]}}}}},"sap.fiori":{"registrationIds":[],"archeType":"transactional"},"sap.cloud":{"public":true,"service":"task2"}}'
});
//# sourceMappingURL=Component-preload.js.map
