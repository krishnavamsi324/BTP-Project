sap.ui.define(["sap/ui/core/mvc/ControllerExtension"],function(e){"use strict";var t;return e.extend("task2collegelect.ext.controller.LecObjectcontroller",{override:{routing:{onAfterBinding:async function(){debugger;setTimeout(function(){this.base.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Button")}).forEach(function(e){if(e.getText().includes("Create")){e.setText("Send for Approval")}})}.bind(this),500)},onBeforeBinding:async function(){debugger;var e=this.base.getExtensionAPI().getModel();if(!e){console.error("Model is not available.");return}debugger;var s=this.base.getView().byId("task2collegelect::collegeObjectPage--fe::CustomSubSection::Attachments--uploadSet");const i=window.location.href;console.log("Current URL:",i);const n=new URL(i);const l=n.hash.substring(1);const o=/college\(lectId='([^']*)',IsActiveEntity=(true|false)\)/.exec(l);const a=o?o[1]:null;const d=o?o[2]==="true":null;if(d===true){s.setUploadButtonInvisible(true);s.setUploadEnabled(false);s.mBindingInfos.items.template.setEnabledRemove(false);s.mBindingInfos.items.template.setVisibleRemove(false);s.mBindingInfos.items.template.setEnabledEdit(false);s.mBindingInfos.items.template.setVisibleEdit(false)}else if(d===false){s.setUploadButtonInvisible(false);s.setUploadEnabled(true);s.mBindingInfos.items.template.setEnabledRemove(true);s.mBindingInfos.items.template.setVisibleRemove(true);s.mBindingInfos.items.template.setEnabledEdit(true);s.mBindingInfos.items.template.setVisibleEdit(true)}setTimeout(async function(){if(a&&d===true){s.setUploadButtonInvisible(true);s.setUploadEnabled(false);s.mBindingInfos.items.template.setEnabledRemove(false);s.mBindingInfos.items.template.setVisibleRemove(false);s.mBindingInfos.items.template.setEnabledEdit(false);s.mBindingInfos.items.template.setVisibleEdit(false);let i="postattach";let n=this.getView().getModel().bindContext(`/${i}(...)`);console.log();n.setParameter("p",a);await n.execute();const l=n.getBoundContext();var e=l.getValue();console.log(e.value.status);if(e.value.status=="Approved"&&t==="krishna.vamsi@peolsolutions.com"){this.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Button")}).forEach(function(e){if(e.getId().includes("Delete")){e.setVisible(true)}else if(e.getId().includes("Edit")){e.setEnabled(true)}})}else{this.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Button")}).forEach(function(e){if(e.getId().includes("Delete")){e.setEnabled(false);e.setVisible(false)}else if(e.getId().includes("Edit")){e.setEnabled(false);e.setVisible(false)}})}}}.bind(this),500)}},onInit:async function(){var e=this.base.getExtensionAPI().getModel();debugger;if(sap.ushell&&sap.ushell.Container){t=(new sap.ushell.services.UserInfo).getEmail();console.log(t);debugger;if(t!=="krishna.vamsi@peolsolutions.com"){this.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Button")}).forEach(function(e){if(e.getId().includes("Delete")){e.setVisible(false)}else if(e.getId().includes("Edit")){e.setEnabled(false)}})}}}}})});
//# sourceMappingURL=LecObjectcontroller.controller.js.map